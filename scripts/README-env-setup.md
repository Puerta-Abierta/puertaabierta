# Environment Setup for Homepage Import Scripts

This guide explains how to set up environment variables for the homepage import scripts.

## Quick Setup

### 1. Interactive Environment Setup (Recommended)
```bash
npm run create-env
```
This will guide you through creating your `.env.local` file step by step.

### 2. Test Your Environment
```bash
npm run test-env
```
This will verify that all required environment variables are loaded correctly.

### 3. Run the Import
```bash
npm run setup-homepage
```
This will use your environment variables to import the homepage content.

## Environment Variables

### Required Variables
- `NEXT_PUBLIC_SANITY_PROJECT_ID` - Your Sanity project ID
- `SANITY_API_TOKEN` - Your Sanity API token with Editor permissions

### Optional Variables
- `NEXT_PUBLIC_SANITY_DATASET` - Dataset name (defaults to 'production')
- `NEXT_PUBLIC_SANITY_API_VERSION` - API version (defaults to '2023-05-03')

## Where to Find These Values

### Sanity Project ID
1. Go to [sanity.io/manage](https://sanity.io/manage)
2. Select your project
3. The Project ID is shown in the project settings

### Sanity API Token
1. Go to [sanity.io/manage](https://sanity.io/manage)
2. Select your project
3. Go to "API" tab
4. Click "Add API token"
5. Give it a name (e.g., "Homepage Import")
6. Select "Editor" permissions
7. Copy the generated token

## File Priority

The scripts will load environment variables in this order:
1. `.env.local` (highest priority)
2. `.env` (fallback)

## Troubleshooting

### No Environment File Found
```
⚠️ No .env.local or .env file found. Make sure to set environment variables.
```
**Solution**: Run `npm run create-env` to create your environment file.

### Missing Required Variables
```
❌ Missing required environment variables:
   - NEXT_PUBLIC_SANITY_PROJECT_ID
   - SANITY_API_TOKEN
```
**Solution**: Run `npm run create-env` or manually edit your `.env.local` file.

### Invalid API Token
```
❌ Failed to connect to Sanity: Unauthorized
```
**Solution**: Check your API token has "Editor" permissions and is correct.

## Scripts Overview

| Script | Purpose | Usage |
|--------|---------|-------|
| `create-env` | Interactive environment setup | `npm run create-env` |
| `test-env` | Test environment variables | `npm run test-env` |
| `setup-homepage` | Full setup wizard | `npm run setup-homepage` |
| `import-homepage` | Direct import | `npm run import-homepage` |

## Example .env.local File

```bash
# Sanity Configuration
# Generated by create-env.js script

# Project ID from https://sanity.io/manage
NEXT_PUBLIC_SANITY_PROJECT_ID=abc123def

# API Token from https://sanity.io/manage -> Your Project -> API -> Tokens
# Make sure to create a token with "Editor" permissions
SANITY_API_TOKEN=sk1234567890abcdef

# Dataset name (defaults to 'production')
NEXT_PUBLIC_SANITY_DATASET=production

# Next.js Configuration
NEXT_PUBLIC_SANITY_API_VERSION=2023-05-03
```

## Security Notes

- Never commit `.env.local` to version control
- Keep your API token secure
- Use different tokens for different environments
- Rotate your API tokens regularly

## Next Steps

After setting up your environment:

1. **Test the connection**: `npm run test-env`
2. **Run the setup wizard**: `npm run setup-homepage`
3. **Import your content**: Follow the wizard prompts
4. **Verify in Sanity Studio**: Check your imported content

